import{A as K}from"./api-CIkJTggI.js";import{m as Q,r as V,p as y,j as X,c as S,b as e,w as a,d as i,F as j,o as v,f as s,k as Y,g as N,q as Z,e as A,n as L}from"./index-BdyWt8Po.js";const ee={class:"dialog-footer"},le={class:"dialog-footer"},oe={__name:"terminus",setup(ae){const{proxy:O}=Q(),h=V([]),R=y([{prop:"work_type",label:"班次",width:60},{prop:"serial",label:"当日流水号",width:100},{prop:"equipment",label:"客服设备",width:100},{prop:"user_name",label:"客户名",width:130},{prop:"card_type",label:"卡种",width:80},{prop:"card_country",label:"卡国家",width:80},{prop:"card_code",label:"卡代码",width:80},{prop:"card_balance",label:"卡金额",width:80},{prop:"rate",label:"汇率",width:80},{prop:"money",label:"利润",width:80},{prop:"channel",label:"出卡渠道",width:100},{prop:"acquisition",label:"收购成本",width:100},{prop:"create_time",label:"添加时间",width:160}]),n=V({id:"",uuid:"",card_balance:"",card_rate:"",acquisition:"",selling:"",rate:"",handling:"",naila_balance:"",money:"",channel:""}),f=V(!1),g=V(!1),r=y({total:0,current:1,page_size:20,total_pages:1}),m=y({user_name:null,auth_name:null}),T=()=>{r.current=1,c()},B=()=>{Object.keys(m).forEach(p=>{m[p]=""}),r.current=1,c()},P=p=>{r.page_size=p,r.current=1,c()},E=p=>{r.current=p,c()},U=()=>{f.value=!1},k=()=>{g.value=!1},$=async p=>{f.value=!0,L(()=>{Object.assign(n.value,p)})},F=async p=>{g.value=!0,L(()=>{Object.assign(n.value,p)})},D=async()=>{},I=async()=>{f.value=!0},c=async()=>{try{const p=new URL(K.terminus.terminus_list),l=new URLSearchParams;Object.entries(m).forEach(([u,o])=>{o!=null&&o!==""&&l.append(u,o)}),r.current&&l.append("current",r.current),l.append("page_size",r.page_size),l.append("type_",1),p.search=l.toString();const d=await O.$api.get(p,{});console.log(111,d),r.total=d.pagination.total,r.current=d.pagination.current,r.total_pages=d.pagination.total_pages,h.value=d.list,lastUpdateTime.value=new Date().toLocaleString("zh-CN")}catch{}};return X(()=>{c()}),(p,l)=>{const d=i("el-input"),u=i("el-form-item"),o=i("el-col"),b=i("el-row"),w=i("el-form"),_=i("el-button"),x=i("el-table-column"),C=i("el-dropdown-item"),M=i("el-dropdown-menu"),W=i("el-dropdown"),G=i("el-table"),H=i("el-pagination"),z=i("el-tabs"),q=i("el-dialog");return v(),S(j,null,[e(b,{gutter:24,style:{"align-items":"center","margin-top":"10px"}},{default:a(()=>[e(o,{span:16},{default:a(()=>[e(w,{inline:!0,model:m},{default:a(()=>[e(b,{gutter:20},{default:a(()=>[e(o,{span:8,style:{display:"flex","align-items":"center","line-height":"100%"}},{default:a(()=>[e(u,{label:"客服名字：",style:{margin:"5px",flex:"10","margin-left":"10px"}},{default:a(()=>[e(d,{modelValue:m.auth_name,"onUpdate:modelValue":l[0]||(l[0]=t=>m.auth_name=t),placeholder:"请输入客服名字",style:{width:"200px"}},null,8,["modelValue"])]),_:1})]),_:1}),e(o,{span:8,style:{display:"flex","align-items":"center","line-height":"100%"}},{default:a(()=>[e(u,{label:"客户名：",style:{margin:"5px",flex:"10","margin-left":"10px"}},{default:a(()=>[e(d,{modelValue:m.user_name,"onUpdate:modelValue":l[1]||(l[1]=t=>m.user_name=t),placeholder:"请输入客户名",style:{width:"200px"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(o,{span:16},{default:a(()=>l[21]||(l[21]=[s(" 银行余额、余额汇率、奈拉汇率 可以变动 ")])),_:1,__:[21]}),e(o,{span:8,style:{display:"flex","align-items":"center",gap:"8px"}},{default:a(()=>[e(_,{type:"primary",onClick:T},{default:a(()=>l[22]||(l[22]=[s("搜索")])),_:1,__:[22]}),e(_,{type:"info",onClick:B},{default:a(()=>l[23]||(l[23]=[s("重置")])),_:1,__:[23]}),e(_,{type:"info",onClick:I},{default:a(()=>l[24]||(l[24]=[s("添加")])),_:1,__:[24]})]),_:1})]),_:1}),e(G,{data:h.value,border:"",style:{width:"100%"}},{default:a(()=>[(v(!0),S(j,null,Y(R,t=>(v(),N(x,{key:t.prop,label:t.label,prop:t.prop,width:t.width,"min-width":t.minWidth,"show-overflow-tooltip":""},null,8,["label","prop","width","min-width"]))),128)),e(x,{fixed:"right",label:"操作",align:"center","min-width":"70"},{default:a(t=>[e(W,{trigger:"click"},{dropdown:a(()=>[e(M,null,{default:a(()=>[t.row.status===0?(v(),N(C,{key:0,onClick:J=>$(t.row)},{default:a(()=>l[26]||(l[26]=[s("修改")])),_:2,__:[26]},1032,["onClick"])):Z("",!0),e(C,{onClick:J=>F(t.row)},{default:a(()=>l[27]||(l[27]=[s("详情")])),_:2,__:[27]},1032,["onClick"])]),_:2},1024)]),default:a(()=>[e(_,{type:"primary",link:"",size:"small"},{default:a(()=>l[25]||(l[25]=[s(" 点击操作 ")])),_:1,__:[25]})]),_:2},1024)]),_:1})]),_:1},8,["data"]),e(H,{"current-page":r.current,"onUpdate:currentPage":l[2]||(l[2]=t=>r.current=t),layout:"total, sizes, prev, pager, next, jumper","page-size":r.page_size,"page-sizes":[10,20,50,100],total:r.total,onCurrentChange:E,onSizeChange:P},null,8,["current-page","page-size","total"]),e(q,{modelValue:f.value,"onUpdate:modelValue":l[11]||(l[11]=t=>f.value=t),"before-close":U,"close-on-click-modal":!1,title:"修改客服参数"},{footer:a(()=>[A("div",ee,[e(_,{onClick:U},{default:a(()=>l[28]||(l[28]=[s("取消")])),_:1,__:[28]}),e(_,{type:"primary",onClick:D},{default:a(()=>l[29]||(l[29]=[s("提交")])),_:1,__:[29]})])]),default:a(()=>[e(w,{ref:"amountformRef",class:"dialog-form","label-width":"100px",model:n.value},{default:a(()=>[e(z,{type:"border-card"},{default:a(()=>[e(b,{gutter:20},{default:a(()=>[e(o,{span:12},{default:a(()=>[e(u,{label:"卡金额：",prop:"card_balance"},{default:a(()=>[e(d,{modelValue:n.value.card_balance,"onUpdate:modelValue":l[3]||(l[3]=t=>n.value.card_balance=t),placeholder:"请输入卡金额"},null,8,["modelValue"])]),_:1})]),_:1}),e(o,{span:12},{default:a(()=>[e(u,{label:"卡汇率：",prop:"card_rate"},{default:a(()=>[e(d,{modelValue:n.value.card_rate,"onUpdate:modelValue":l[4]||(l[4]=t=>n.value.card_rate=t),placeholder:"请输入卡汇率"},null,8,["modelValue"])]),_:1})]),_:1}),e(o,{span:12},{default:a(()=>[e(u,{label:"收购金额：",prop:"acquisition"},{default:a(()=>[e(d,{modelValue:n.value.acquisition,"onUpdate:modelValue":l[5]||(l[5]=t=>n.value.acquisition=t),placeholder:"请输入收购金额"},null,8,["modelValue"])]),_:1})]),_:1}),e(o,{span:12},{default:a(()=>[e(u,{label:"出售金额：",prop:"selling"},{default:a(()=>[e(d,{modelValue:n.value.selling,"onUpdate:modelValue":l[6]||(l[6]=t=>n.value.selling=t),placeholder:"请输入出售金额"},null,8,["modelValue"])]),_:1})]),_:1}),e(o,{span:12},{default:a(()=>[e(u,{label:"汇率：",prop:"rate"},{default:a(()=>[e(d,{modelValue:n.value.rate,"onUpdate:modelValue":l[7]||(l[7]=t=>n.value.rate=t),placeholder:"请输入汇率"},null,8,["modelValue"])]),_:1})]),_:1}),e(o,{span:12},{default:a(()=>[e(u,{label:"手续费：",prop:"handling"},{default:a(()=>[e(d,{modelValue:n.value.handling,"onUpdate:modelValue":l[8]||(l[8]=t=>n.value.handling=t),placeholder:"请输入手续费"},null,8,["modelValue"])]),_:1})]),_:1}),e(o,{span:12},{default:a(()=>[e(u,{label:"泰拉余额：",prop:"naila_balance"},{default:a(()=>[e(d,{modelValue:n.value.naila_balance,"onUpdate:modelValue":l[9]||(l[9]=t=>n.value.naila_balance=t),placeholder:"请输入泰拉余额"},null,8,["modelValue"])]),_:1})]),_:1}),e(o,{span:12},{default:a(()=>[e(u,{label:"出卡渠道：",prop:"channel"},{default:a(()=>[e(d,{modelValue:n.value.channel,"onUpdate:modelValue":l[10]||(l[10]=t=>n.value.channel=t),placeholder:"请输入出卡渠道"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),e(q,{modelValue:g.value,"onUpdate:modelValue":l[20]||(l[20]=t=>g.value=t),"before-close":k,"close-on-click-modal":!1,title:"客服详情"},{footer:a(()=>[A("div",le,[e(_,{onClick:k},{default:a(()=>l[30]||(l[30]=[s("取消")])),_:1,__:[30]})])]),default:a(()=>[e(w,{ref:"detailformRef",class:"dialog-form","label-width":"100px",model:n.value},{default:a(()=>[e(z,{type:"border-card"},{default:a(()=>[e(b,{gutter:20},{default:a(()=>[e(o,{span:12},{default:a(()=>[e(u,{label:"卡金额：",prop:"card_balance"},{default:a(()=>[e(d,{modelValue:n.value.card_balance,"onUpdate:modelValue":l[12]||(l[12]=t=>n.value.card_balance=t),placeholder:"请输入卡金额"},null,8,["modelValue"])]),_:1})]),_:1}),e(o,{span:12},{default:a(()=>[e(u,{label:"卡汇率：",prop:"card_rate"},{default:a(()=>[e(d,{modelValue:n.value.card_rate,"onUpdate:modelValue":l[13]||(l[13]=t=>n.value.card_rate=t),placeholder:"请输入卡汇率"},null,8,["modelValue"])]),_:1})]),_:1}),e(o,{span:12},{default:a(()=>[e(u,{label:"收购金额：",prop:"acquisition"},{default:a(()=>[e(d,{modelValue:n.value.acquisition,"onUpdate:modelValue":l[14]||(l[14]=t=>n.value.acquisition=t),placeholder:"请输入收购金额"},null,8,["modelValue"])]),_:1})]),_:1}),e(o,{span:12},{default:a(()=>[e(u,{label:"出售金额：",prop:"selling"},{default:a(()=>[e(d,{modelValue:n.value.selling,"onUpdate:modelValue":l[15]||(l[15]=t=>n.value.selling=t),placeholder:"请输入出售金额"},null,8,["modelValue"])]),_:1})]),_:1}),e(o,{span:12},{default:a(()=>[e(u,{label:"汇率：",prop:"rate"},{default:a(()=>[e(d,{modelValue:n.value.rate,"onUpdate:modelValue":l[16]||(l[16]=t=>n.value.rate=t),placeholder:"请输入汇率"},null,8,["modelValue"])]),_:1})]),_:1}),e(o,{span:12},{default:a(()=>[e(u,{label:"手续费：",prop:"handling"},{default:a(()=>[e(d,{modelValue:n.value.handling,"onUpdate:modelValue":l[17]||(l[17]=t=>n.value.handling=t),placeholder:"请输入手续费"},null,8,["modelValue"])]),_:1})]),_:1}),e(o,{span:12},{default:a(()=>[e(u,{label:"泰拉余额：",prop:"naila_balance"},{default:a(()=>[e(d,{modelValue:n.value.naila_balance,"onUpdate:modelValue":l[18]||(l[18]=t=>n.value.naila_balance=t),placeholder:"请输入泰拉余额"},null,8,["modelValue"])]),_:1})]),_:1}),e(o,{span:12},{default:a(()=>[e(u,{label:"出卡渠道：",prop:"channel"},{default:a(()=>[e(d,{modelValue:n.value.channel,"onUpdate:modelValue":l[19]||(l[19]=t=>n.value.channel=t),placeholder:"请输入出卡渠道"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}}};export{oe as default};
